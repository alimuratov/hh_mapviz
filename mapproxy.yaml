# -------------------------------
# MapProxy example configuration.
# -------------------------------
#
# This is a minimal MapProxy configuration.
# See full_example.yaml and the documentation for more options.
#

# Starts the following services:
# Demo:
#     http://localhost:8080/demo
# WMS:
#     capabilities: http://localhost:8080/service?REQUEST=GetCapabilities
# WMTS:
#     capabilities: http://localhost:8080/wmts/1.0.0/WMTSCapabilities.xml
#     first tile: http://localhost:8080/wmts/gm_layer/gm_grid/0/0/0.png


services:
  demo:
  kml:
  wmts:
  wms:
    md:
      title: MapProxy WMS Proxy
      abstract: This is a minimal MapProxy example.

layers:
  - name: gm_layer
    title: Test of using GM tiles
    sources: [gm_cache]

caches:
  gm_cache:
    # Use the standard webmercator grid
    grids: [webmercator]
    sources: [gm]
    cache:
      type: file
      directory_layout: tms

sources:
  gm:
    type: tile
    url: https://a.tile.openstreetmap.org/%(z)s/%(x)s/%(y)s.png
    # IMPORTANT: Reference the correct grid here
    grid: webmercator

grids:
  # Use the standard webmercator grid definition
  webmercator:
    base: GLOBAL_MERCATOR
    origin: nw


globals:
  cache:
    # Use a directory that is writable by any user
    base_dir: /tmp/mapproxy/cache_data
    # Use a file-based lock in a writable directory
    lock_dir: /tmp/mapproxy/locks